# location of CMVision
CMVDIR = ../..

# libraries to use
GTKLIBS  = `gtk-config --libs`
GTKINC   = `gtk-config --cflags`

LIB = -L/usr/lib $(GTKLIBS) -lm -lpthread
INCLUDE = $(GTKINC) -I$(CMVDIR)/include

# compiler and settings to use
CC = g++
CFLAGS = -O3 $(INCLUDE) -DUSE_METEOR
# -g -pg -O2 -ffast-math 

# project settings
TARGET = thresh

SOURCES = $(wildcard *.cc) $(wildcard $(CMVDIR)/src/*.cc)
OBJ = $(SOURCES:%.cc=%.o)

# rules and other cruft
all: $(TARGET)

dep: depend

.SUFFIXES: .cc
%.o: %.cc
	$(CC) $(CFLAGS) -c $< -o $@

$(TARGET): $(OBJ)
	$(CC) $(CFLAGS) -o $@ $(OBJ) $(LIB) $(INCLUDE)

clean:
	-rm -rf core *.o *~ "#"*"#" $(CMVDIR)/src/*.o Makefile.bak

depend:
	makedepend -fMakefile $(INCLUDE) $(SOURCES)

# autogenerated dependencies:
